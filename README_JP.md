# Intelligent Knowledge Distiller (インテリジェント知識蒸留器)

このプロジェクトは、研究論文 **「From Unstructured Communication to Intelligent RAG: Multi-Agent Automation for Supply Chain Knowledge Bases」** ([arXiv:2506.17484](https://arxiv.org/abs/2506.17484)) で提案された、マルチエージェントによる知識ベース構築システムの実装です。

サポートチケットのような非構造化テキストデータから、構造化され、要約された知識ベースへと変換します。

## アーキテクチャと処理フロー

このシステムの中核は、RAG（Retrieval-Augmented Generation）を強化するための「オフラインファースト」アプローチです。問い合わせ時に複雑な処理を行うのではなく、事前に高品質で凝縮された知識ベースを構築します。これは、特化したAIエージェントのパイプラインによって実現されます。

### エージェントの役割

1.  **カテゴリ発見エージェント (Category Discovery Agent)**: 生のチケットデータを分析し、知識の「カテゴリ」分類体系を特定・作成します。
2.  **チケット分類エージェント (Ticket Categorization Agent)**: 各チケットを最も関連性の高いカテゴリに割り当てます。
3.  **知識合成エージェント (Knowledge Synthesis Agent)**: カテゴリ内の全チケットを集約し、主要な問題点と解決策を要約した、簡潔で実用的な知識記事を生成します。

### 大規模カテゴリに対する階層的処理

この実装の重要な特徴は、大量のチケットを含むカテゴリを処理し、詳細な知識が失われないようにする能力です。

-   カテゴリ内のチケット数が定義されたしきい値 (`SUBCATEGORY_THRESHOLD`) を超えると、システムは動的により詳細な階層的処理フローに切り替わります。
-   **サブカテゴリ発見**: 特化したエージェントが大規模カテゴリ内のチケットを再分析し、より粒度の細かいサブカテゴリを発見します。
-   **サブカテゴリ分類**: チケットは、これらの新しいサブカテゴリに分類されます。
-   **サブカテゴリごとの合成**: サブカテゴリごとに知識記事が生成され、より焦点の合った具体的な洞察が得られます。

この動的なロジックは、`App.tsx` 内の `handleProcess` 関数で制御されています。

## 実装の詳細

| 機能 | 場所 | 説明 |
| :--- | :--- | :--- |
| **コアプロンプト** | `constants.ts` | AIエージェントが使用するすべてのプロンプトテンプレートが含まれています。 |
| **オーケストレーションロジック** | `App.tsx` | メインの `handleProcess` 関数が、パイプライン全体の状態とフローを制御します。 |
| **LLMサービス** | `services/` | `llmService.ts` がインターフェースを定義し、`geminiService.ts` と `openaiService.ts` が具体的な実装を提供します。 |
| **型定義** | `types.ts` | `Category` や `SubCategory` などのコアデータ構造を定義します。 |

## ローカルでの実行方法

**前提条件:** Node.js

1.  依存関係をインストールします:
    `npm install`
2.  ルートディレクトリに `.env.local` ファイルを作成し、APIキーを設定します:
    ```
    GEMINI_API_KEY="YOUR_GEMINI_API_KEY"
    OPENAI_API_KEY="YOUR_OPENAI_API_KEY"
    ```
3.  アプリケーションを実行します:
    `npm run dev`
